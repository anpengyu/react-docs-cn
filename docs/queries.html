<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <!-- Basic -->
    <title>Queries | Apollo React Docs</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="images/favicon.png" sizes="16x16 32x32 64x64">

    <!-- Social -->
    <meta property="og:type" content="article">
    <meta property="og:url" content="https://apollographqlcn.github.io/react-docs-cn">
    <meta property="og:title" content="Queries | Apollo React Docs">
    <meta property="og:description" content="">
    <meta property="og:image" content="">
    <meta name="twitter:card" content="summary_image_large">
    <meta name="twitter:site" content="@apollographqlcn">
    <meta name="twitter:title" content="Queries | Apollo React Docs">
    <meta name="twitter:description" content="">
    <meta name="twitter:image" content="">

    <!-- Misc -->
    <meta name="google-site-verification" content="" />
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,300,200,300italic,400italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style/style.css">
  </head>
  <body class="">
    

<div class="nav dark">
  <div class="nav-group">
    <div class="nav-item show-mobile">
      <span class="js-sidebar-toggle ">
        <span class="icon-menu"></span>
      </span>
    </div>
    <div class="nav-item">
      
      <a class="logo-wrapper" href="http://dev.apollodata.com/" title="Apollo Developers"  >
        <img src="images/logo-apollo-space-left.svg" alt="Apollo" class="logo"/><img src="images/logo-apollo-subbrands-developers-space.svg" class="logo-subbrand" alt="Developers"/>
      </a>
    </div>
  </div>

  <div class="nav-group right">
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false separator">
        <a class="link" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      
      <div class="nav-item show-desktop false ">
        <a class="link" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>
</div>

<div class="sidebar">
  <div class="panel">
    <div class="panel-item">
      <a class="" href="http:/dev.apollodata.com/" title="Apollo"  >
        <span>Apollo Developers</span>
      </a>
    </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/react"  >
          <span>React</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/angular2"  >
          <span>Angular</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/ios"  >
          <span>iOS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/android"  >
          <span>Android</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/core"  >
          <span>Vanilla JS</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/tools"  >
          <span>Server</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="https://medium.com/apollo-stack" target=_new >
          <span>Blog</span>
        </a>
      </div>
    
      <div class="panel-item "">
        <a class="" href="http://dev.apollodata.com/community"  >
          <span>Community</span>
        </a>
      </div>
    
  </div>

  <div class="sidebar-content">
    <div class="topcap">
      <span class="title-sidebar">Apollo React Docs</span>
      
    </div>

    
    <div class="wrapper-search">
      <div class="input-symbol small round">
        <input type="text" placeholder="Search React Guide" id="desktop-search-input" />
        <span class="icon-search"></span>
      </div>
      <div class="wrapper-desktop-search-results"></div>
    </div>

    

    <ul class="toc">
      
        <li>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="index.html" class="sidebar-link ">
                  <span>Introduction</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="initialization.html" class="sidebar-link ">
                  <span>Setup and options</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="simple-example.html" class="sidebar-link ">
                  <span>Small Example: Snack</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="example-schema.html" class="sidebar-link ">
                  <span>Full Example: GitHunt</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="migration.html" class="sidebar-link ">
                  <span>Migrating to 1.0</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Usage</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc  current">
                <a href="" class="sidebar-link  current">
                  <span>Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="mutations.html" class="sidebar-link ">
                  <span>Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="subscriptions.html" class="sidebar-link ">
                  <span>Subscriptions</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="receiving-updates.html" class="sidebar-link ">
                  <span>Syncing with the Server</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="cache-updates.html" class="sidebar-link ">
                  <span>Updating the Store</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">API Reference</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="api.html" class="sidebar-link ">
                  <span>General</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-graphql.html" class="sidebar-link ">
                  <span>graphql: Container</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-queries.html" class="sidebar-link ">
                  <span>graphql: Queries</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-mutations.html" class="sidebar-link ">
                  <span>graphql: Mutations</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="api-server.html" class="sidebar-link ">
                  <span>Server Side Rendering</span>
                </a>
              </li>
            
          </ul>
        </li>
      
        <li>
          
            <div class="heading-toc">Recipes</div>
          
          <ul class="list-toc">
            
              
              <li class="item-toc ">
                <a href="auth.html" class="sidebar-link ">
                  <span>Authentication</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="pagination.html" class="sidebar-link ">
                  <span>Pagination</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="optimistic-ui.html" class="sidebar-link ">
                  <span>Optimistic UI</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="fragments.html" class="sidebar-link ">
                  <span>Using Fragments</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="prefetching.html" class="sidebar-link ">
                  <span>Prefetching data</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="react-native.html" class="sidebar-link ">
                  <span>Integrating with React Native</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="redux.html" class="sidebar-link ">
                  <span>Integrating with Redux</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="webpack.html" class="sidebar-link ">
                  <span>Webpack loader</span>
                </a>
              </li>
            
              
              <li class="item-toc ">
                <a href="server-side-rendering.html" class="sidebar-link ">
                  <span>Server Side Rendering</span>
                </a>
              </li>
            
          </ul>
        </li>
      
    </ul>
  </div>
</div>

<div class="content">
  <div class="content-wrapper">
    <div class="header-content">
      <h1 class="title-page">Queries</h1>
      

      <div class="page-actions">
        <div class="actions-group">
          <a class="btn tertiary small round lowercase" href="https://github.com/apollographqlcn/react-docs-cn/tree/master/source/queries.md" target="_blank"><span class="icon-github"></span> <span>Edit on GitHub</span></a>
          
        </div>
      </div>
    </div>

    <div class="document-formatting">
      <p>On this page, you can learn how to use <code>react-apollo</code> to attach GraphQL query results to your React UI. This guide assumes some familiarity with GraphQL itself. You can read about GraphQL queries themselves in detail at <a href="http://graphql.org/docs/queries/" target="_blank" rel="external">graphql.org</a>.</p>
<p>One of our core values is “it’s just GraphQL”. When using <code>react-apollo</code>, you don’t have to learn anything special about the query syntax, since everything is just standard GraphQL. Anything you can type into the GraphiQL query IDE, you can also put into your <code>react-apollo</code> code.</p>
<h2 id="basics">Basic queries</h2>

<p>When we are running a basic query we can use the <code>graphql</code> container in a very simple way. We simply parse our query using the <code>gql</code> template literal and then pass it into the <code>graphql</code> container as the first argument.</p>
<p>For instance, in GitHunt, we want to display the currently logged-in user in the <code>Profile</code> component:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; gql, graphql &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Profile</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123; ... &#125;</div><div class="line"></div><div class="line"><span class="comment">// We use the gql tag to parse our query string into a query document</span></div><div class="line"><span class="keyword">const</span> CurrentUserForLayout = gql<span class="string">`</span></div><div class="line">  query CurrentUserForLayout &#123;</div><div class="line">    currentUser &#123;</div><div class="line">      login</div><div class="line">      avatar_url</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`;</div><div class="line"></div><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout)(Profile);</div></pre></td></tr></table></figure>
<p>When we use <code>graphql</code> with a GraphQL query document, two things happen:</p>
<ol>
<li>The query is loaded from the Apollo client-side data store, or the server if the data is not in the store</li>
<li>Our component subscribes to the store, so that it is updated if the data changes as the result of a mutation or some other response from the server</li>
</ol>
<p>In addition to the <code>currentUser</code> field selected in the query, the <code>data</code> prop also includes a field called <code>loading</code>, a Boolean value indicating if the query is currently being loaded from the server. So if we were to declare <code>propTypes</code> they would look like this:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">Profile.propTypes = &#123;</div><div class="line">  <span class="attr">data</span>: PropTypes.shape(&#123;</div><div class="line">    <span class="attr">loading</span>: PropTypes.bool.isRequired,</div><div class="line">    <span class="attr">currentUser</span>: PropTypes.object,</div><div class="line">  &#125;).isRequired,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<p>The <code>data.currentUser</code> prop will change as what the client knows about the current user changes over time. That information is stored in Apollo Client’s global cache, so if some other query fetches new information about the current user, this component will update to remain consistent. You can read more about techniques to bring the cache up to date with the server in the <a href="cache-updates.html">article about cache updates</a>.</p>
<h2 id="default-result-props" title="The data prop">The structure of the <code>data</code> prop</h2>

<p>As seen above, <code>graphql</code> will pass the result of the query to the wrapped component in a prop called <code>data</code>. It will also pass through all of the props of the parent container.</p>
<p>For queries, the shape of the <code>data</code> prop is the following:</p>
<ul>
<li><code>...fields</code>: One key for each root field in the query.</li>
<li><code>loading</code>: This field is <code>true</code> if there is currently a query fetch in flight, including after calling <code>refetch</code>. <code>false</code> otherwise.</li>
<li><code>error</code>: An ApolloError object that represents the different possible errors that might happen when running a query.</li>
</ul>
<p>There are a lot more methods as well, which you can read about <a href="api-queries.html#graphql-query-data">in the API docs for queries</a>. As an example, for a query like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">query getUserAndLikes($id: ID!) &#123;</div><div class="line">  user(userId: $id) &#123; name &#125;</div><div class="line">  likes(userId: $id) &#123; count &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>You could get props like:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">data: &#123;</div><div class="line">  <span class="attr">user</span>: &#123; <span class="attr">name</span>: <span class="string">"James"</span> &#125;,</div><div class="line">  <span class="attr">likes</span>: &#123; <span class="attr">count</span>: <span class="number">10</span> &#125;,</div><div class="line">  <span class="attr">loading</span>: <span class="literal">false</span>,</div><div class="line">  <span class="attr">error</span>: <span class="literal">null</span>,</div><div class="line">  <span class="attr">variables</span>: &#123; <span class="attr">id</span>: <span class="string">'asdf'</span> &#125;,</div><div class="line">  refetch() &#123; ... &#125;,</div><div class="line">  fetchMore() &#123; ... &#125;,</div><div class="line">  startPolling() &#123; ... &#125;,</div><div class="line">  stopPolling() &#123; ... &#125;,</div><div class="line">  <span class="comment">// ... more methods</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>If you use the <code>props</code> option to the wrapper to specify <a href="#graphql-props">custom <code>props</code></a> for your child component, this object will be passed to the <code>props</code> option on the parameter named <code>data</code>.</p>
<h2 id="graphql-options">Variables and options</h2>

<p>If you want to configure the query, you can provide an <code>options</code> key on the second argument to <code>graphql</code>, and your options will be passed along to <a href="/core/apollo-client-api.html#watchQuery"><code>ApolloClient.watchQuery</code></a>. If your query requires variables, this is the place to pass them in:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Suppose our profile query took an avatar size</span></div><div class="line"><span class="keyword">const</span> CurrentUserForLayout = gql<span class="string">`</span></div><div class="line">  query CurrentUserForLayout($avatarSize: Int!) &#123;</div><div class="line">    currentUser &#123;</div><div class="line">      login</div><div class="line">      avatar_url(avatarSize: $avatarSize)</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`;</div><div class="line"></div><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="attr">options</span>: &#123; <span class="attr">variables</span>: &#123; <span class="attr">avatarSize</span>: <span class="number">100</span> &#125; &#125;,</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<h3 id="options-from-props">Computing from props</h3>

<p>Typically, variables to the query will be computed from the <code>props</code> of the wrapper component. Wherever the component is used in your application, the caller would pass arguments. So <code>options</code> can be a function that takes the props passed into the component:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// The caller could do something like:</span></div><div class="line">&lt;ProfileWithData avatarSize=&#123;<span class="number">300</span>&#125; /&gt;</div><div class="line"></div><div class="line"><span class="comment">// And our HOC could look like:</span></div><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="attr">options</span>: <span class="function">(<span class="params">&#123; avatarSize &#125;</span>) =&gt;</span> (&#123; <span class="attr">variables</span>: &#123; avatarSize &#125; &#125;),</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<p>By default, <code>graphql</code> will attempt to pick up any missing variables from the query from <code>ownProps</code>. So in our example above, we could have used the simpler <code>graphql(CurrentUserForLayout)(Profile);</code>. However, if you need to change the name of a variable, compute the value, or just want to be more explicit about things, the <code>options</code> function is the place to do it.</p>
<h3 id="other-graphql-options">Other options</h3>

<p>There are a lot of other options you can pass in other than just <code>variables</code>, for example <code>pollInterval</code>:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="comment">// See the watchQuery API for the options you can provide here</span></div><div class="line">  options: &#123; <span class="attr">pollInterval</span>: <span class="number">20000</span> &#125;,</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<p>If you use a function to compute options from props, all of these <code>options</code> will be automatically recalculated whenever the props change.</p>
<p><a href="api-queries.html#graphql-query-options">Read about all of the query options in the API documentation.</a></p>
<h2 id="graphql-skip">Skipping an operation</h2>

<p>The <code>graphql</code> container API is intentionally fully static, so you can’t dynamically change the query or wrapped component at runtime without generating a new React component. However, sometimes you may want to do some conditional logic to skip a query based on the passed in props. To do this you can use the <code>skip</code> config.</p>
<p>For example, you could use this if you want to ignore a query if a user isn’t authenticated:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="attr">skip</span>: <span class="function">(<span class="params">ownProps</span>) =&gt;</span> !ownProps.authenticated,</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<p><code>skip</code> can also be a static property:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="attr">skip</span>: <span class="literal">true</span>,</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<p>Passing the <code>skip</code> config completely bypasses the higher-order component, as if it weren’t there at all. This means your child component doesn’t get a <code>data</code> prop at all, and the <code>options</code> or <code>props</code> methods are not called.</p>
<h2 id="graphql-props">Controlling child props</h2>

<p>By default, <code>graphql</code> used with a query will provide a <code>data</code> prop to the wrapped component with various information about the state of the query. We’ll also see that <a href="mutations.html">mutations</a> provide a callback on the <code>mutate</code> prop. It’s possible to write your whole app just using these default prop names.</p>
<p>However, if you want to decouple your UI components from Apollo and make them more reusable in different contexts, you may want to modify these default props and wrap them with your own custom objects and functions.</p>
<h3 id="graphql-name">Changing the prop name</h3>

<p>If you want to change the name of the default <code>data</code> prop, but keep the exact same shape, you can use <code>name</code> option to the <code>graphql</code> container. This is especially useful when one component is using multiple queries via nested <code>graphql</code> containers, where the <code>data</code> prop would otherwise be overwritten.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; gql, graphql &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Profile</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123; ... &#125;</div><div class="line"></div><div class="line">Profile.propTypes = &#123;</div><div class="line">  <span class="attr">CurrentUserForLayout</span>: PropTypes.shape(&#123;</div><div class="line">    <span class="attr">loading</span>: PropTypes.bool.isRequired,</div><div class="line">    <span class="attr">currentUser</span>: PropTypes.object,</div><div class="line">  &#125;).isRequired,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"><span class="keyword">const</span> CurrentUserForLayout = gql<span class="string">`</span></div><div class="line">  query CurrentUserForLayout &#123;</div><div class="line">    currentUser &#123;</div><div class="line">      login</div><div class="line">      avatar_url</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`;</div><div class="line"></div><div class="line"><span class="comment">// We want the prop to be called 'CurrentUserForLayout' instead of data</span></div><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'CurrentUserForLayout'</span></div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<h3 id="graphql-props-option">Arbitrary transformation</h3>

<p>If you want complete control over the props of the child component, use the <code>props</code> option to map the query <code>data</code> object into any number of props that will be passed into the child:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">import</span> React, &#123; Component, PropTypes &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; gql, graphql &#125; <span class="keyword">from</span> <span class="string">'react-apollo'</span>;</div><div class="line"></div><div class="line"><span class="comment">// Here Profile has a more generic API, that's not coupled to Apollo or the</span></div><div class="line"><span class="comment">// shape of the query that we've used</span></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">Profile</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123; ... &#125;</div><div class="line">Profile.propTypes = &#123;</div><div class="line">  <span class="attr">userLoading</span>: PropTypes.bool.isRequired,</div><div class="line">  <span class="attr">user</span>: PropTypes.object,</div><div class="line">  <span class="attr">refetchUser</span>: PropTypes.func,</div><div class="line">&#125;;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">const</span> CurrentUserForLayout = gql<span class="string">`</span></div><div class="line">  query CurrentUserForLayout &#123;</div><div class="line">    currentUser &#123;</div><div class="line">      login</div><div class="line">      avatar_url</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">`;</div><div class="line"></div><div class="line"><span class="keyword">const</span> ProfileWithData = graphql(CurrentUserForLayout, &#123;</div><div class="line">  <span class="comment">// ownProps are the props that are passed into the `ProfileWithData`</span></div><div class="line">  <span class="comment">// when it is used by a parent component</span></div><div class="line">  props: <span class="function">(<span class="params">&#123; ownProps, data: &#123; loading, currentUser, refetch &#125; &#125;</span>) =&gt;</span> (&#123;</div><div class="line">    <span class="attr">userLoading</span>: loading,</div><div class="line">    <span class="attr">user</span>: currentUser,</div><div class="line">    <span class="attr">refetchUser</span>: refetch,</div><div class="line">  &#125;),</div><div class="line">&#125;)(Profile);</div></pre></td></tr></table></figure>
<p>This style of usage leads to the greatest decoupling between your presentational component (<code>Profile</code>) and Apollo.</p>
<h2 id="full-api">Full API</h2>

<p>For more information about all of the options and features supported by React Apollo for GraphQL queries be sure to review the <a href="api-queries.html">API reference on <code>graphql()</code> queries</a>.</p>

    </div>
  </div>

  <div class="pagination">
    <div class="content-wrapper">
      
      
        <a class="link primary prev"
          href="migration.html">
          <span class="icon-arrow-left-alt"></span>
          <span class="subtitle-pagination">Previous</span>
          Migrating from 0.x to 1.0
        </a>
      
      
        <a class="link primary next"
          href="mutations.html">
          <span class="subtitle-pagination">Next</span>
          Mutations
          <span class="icon-arrow-right-alt"></span>
        </a>
      
    </div>
  </div>

  <div class="github">
    <a class="link tertiary " href="https://github.com/apollographqlcn/react-docs-cn/tree/master/source/queries.md" target="_blank">
      <span class="icon-github"></span>Edit on GitHub</a>
  </div>

  
</div>

    <script src="/script/smooth-scroll.min.js"></script>
    <script src="/script/main.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script>
    <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

    <script>
      // nectar ninja
      (function(){
        var handle = '@meteorjs';
        var a = document.createElement('script');
        var m = document.getElementsByTagName('script')[0];
        a.async = 1;
        a.src = 'https://nectar.ninja/api/v1/' + handle.slice(1);
        m.parentNode.insertBefore(a, m);
      })();

     

      
        (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-PNFDVBB');
      

      
        // Segment Tracking
        !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t){var e=document.createElement("script");e.type="text/javascript";e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};analytics.SNIPPET_VERSION="3.1.0";
        analytics.load("wgrIo8Bul0Ujl8USETG3DB6hONdy4kTg");
        analytics.page()
        }}();
      

      // search box
      

        ['desktop', 'mobile'].forEach(function(type) {
          var search = docsearch({
            apiKey: '768e823959d35bbd51e4b2439be13fb7',
            indexName: 'apollodata',
            inputSelector: '#' + type + '-search-input',
            autocompleteOptions: {
              dropdownMenuContainer: '.wrapper-' + type + '-search-results',
              debug: true
            },
            algoliaOptions: {
              hitsPerPage: 20
            }
          }).autocomplete;

          var sidebar = document.querySelector('.sidebar-content');
          search.on('autocomplete:opened', function() {
            sidebar.classList.add('searching');
          });
          search.on('autocomplete:closed', function() {
            sidebar.classList.remove('searching');
          });
          search.on('autocomplete:updated', function() {
            if (search.val() === '') {
              search.autocomplete.close();
            }
          });
        });
      

      
    </script>
  </body>
</html>
